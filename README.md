# Чат-боты с интеграцией Dialogflow (TG и VK)

В проекте реализованы два чат-бота — для Telegram и ВКонтакте. Они подключены к Dialogflow, который обрабатывает естественный язык и позволяет отвечать на приветствия и другие заранее настроенные фразы. Также предусмотрена система логирования: ошибки записываются в отдельный файл и параллельно отправляются администратору в Telegram в виде уведомлений.

![forgif](https://github.com/user-attachments/assets/6b3662d7-3719-4cfe-814e-02946a585577)

## Установка и запуск

1. Убедитесь, что у вас установлен **Python 3.12**.
2. Склонируйте репозиторий
3. Создайте виртуальное окружение (рекомендуется):
```bash
python3 -m venv venv
```
4. Активируйте виртуальное окружение:
- Windows:
```bash
venv\Scripts\activate
```
- Linux/macOS:
```bash
source venv/bin/activate
```
5. Установите все зависимости:
```bash
pip install -r requirements.txt
```

## Переменные окружения

В корне проекта необходимо создать файл **.env** и прописать в нём следующие параметры:

```ini
TG_BOT_TOKEN=токен_вашего_телеграм_бота
VK_BOT_TOKEN=токен_вашего_vk_бота
GOOGLE_APPLICATION_CREDENTIALS=credentials.json
GOOGLE_PROJECT_ID=идентификатор_вашего_проекта
LOG_BOT_TOKEN=токен_бота_для_уведомлений
TG_CHAT_ID=ваш_chat_id
LOGS_DIR=папка_для_логов (по умолчанию logs)
LOG_FILE=имя_файла_логов.log (по умолчанию bot.log)
```

### Описание параметров:

- **TG_BOT_TOKEN** — токен Telegram-бота. Получить можно у [BotFather](https://t.me/BotFather).  
- **VK_BOT_TOKEN** — ключ доступа ВКонтакте. Чтобы его получить:  
  - Создайте сообщество (если ещё не создано).  
  - Зайдите в раздел **Управление → Дополнительно → Работа с API**.  
  - Нажмите **Создать ключ**.  

- **GOOGLE_APPLICATION_CREDENTIALS** — путь к файлу с ключами для Dialogflow.  
  Чтобы его получить:  
  - Создайте проект в [Google Cloud Console](https://console.cloud.google.com/).  
  - В меню перейдите **APIs & Services → Library**, найдите **Dialogflow API** и включите его.  
  - Перейдите в **IAM & Admin → Service Accounts** и создайте новый аккаунт.  
  - Укажите любое имя и выберите роль **Dialogflow API Admin**.  
  - Откройте созданный аккаунт, вкладку **Keys** → **Add key → Create new key → JSON**.  
  - Скачанный файл сохраните в корень проекта и переименуйте в `credentials.json`.  

- **GOOGLE_PROJECT_ID** — ID проекта в Google Cloud (можно найти на главной странице в Dashboard).  

- **LOG_BOT_TOKEN** — токен отдельного Telegram-бота, через которого будут приходить уведомления об ошибках. Получить можно у [BotFather](https://t.me/BotFather) аналогично.  

- **TG_CHAT_ID** — ID вашего Telegram-чата.  

- **LOGS_DIR** — папка для хранения логов (по умолчанию создаётся `logs`).  

- **LOG_FILE** — имя файла логов (по умолчанию `bot.log`).

## Обучение Dialogflow

Для добавления новых фраз:

- Отредактируйте файл questions.json, добавив новые интенты, как в примере:

```json
{
    "имя_интента": {
        "questions": [
            "Фраза 1",
            "Фраза 2",
        ],
        "answer": "Ответ бота"
    },
}
```

```json
{
    "Устройство на работу": {
        "questions": [
            "Как устроиться к вам на работу?",
            "Как устроиться к вам?",
            "Как работать у вас?",
            "Хочу работать у вас",
            "Возможно-ли устроиться к вам?",
            "Можно-ли мне поработать у вас?",
            "Хочу работать редактором у вас"
        ],
        "answer": "Если вы хотите устроиться к нам, напишите на почту game-of-verbs@gmail.com мини-эссе о себе и прикрепите ваше портфолио."
    },
}
```
- И запустите скрипт
```bash
python create_intents.py
```

## Запуск ботов

Каждый бот необходимо запускать в отдельном окне терминала.  

Для запуска **TG-бота** выполните команду:  
```bash
python tg_bot.py
```
Для запуска **VK-бота** выполните команду: 
```bash
python vk_bot.py

```

